<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="document.css" type="text/css"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja">
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
 <link rel="stylesheet" type="text/css" href="document.css" />
 <title>Trade-Wind式 オリジナルTCG開発環境 利用方法 - elder-alliance.org</title>
</head>
<body>
<p class="header">
<img width="200" height="40" src="banner.png" alt ="elder-alliance.org" />
</p>
<p class="note">
 <a href="http://www.elder-alliance.org/">elder-alliance.org</a>
 &nbsp;&gt;&nbsp;
 <a href="index.html">Trade-Wind式 オリジナルTCG開発環境</a>
 &nbsp;&gt;&nbsp;
 <a href="howtouse.html">利用ガイドライン</a>
 &nbsp;&gt;&nbsp;
 <a href="example.html">例題：おとボクTCGプロジェクト</a>
</p>
<h1 id="devsenv" style="text-align:center">twdev　 利用ガイドライン</h1>
<p>
Trade-Wind式 オリジナルTCG開発環境「twdev」（以下、本プログラム）の利用方法について、説明いたします。
</p>
<p>
目次
</p>
<ol>
 <li><a href="#use-1">プログラムの概念</a></li>
 <li><a href="#use-3">プログラムの利用手順</a></li>
 <li><a href="#use-2">プログラムの仕様</a></li>
</ol>
<h2 id="use-1">プログラムの概念</h2>
<p>
 <a href="program-image.png"><img src="program-image.png" width="300" alt="図　プログラムの概念イメージ" /></a><br />
本プログラムは、イメージ出力を専門とする、簡易型のデータベースです。
テンプレートとリストを用いて、カードイメージを出力します。
</p>
<h2 id="use-3">プログラムの利用手順</h2>
<p>
本プログラムは、コマンドラインから利用します。
コマンドラインとは、以下の方法で用います。
</p>
<h3 id="use-3-1">MS-DOSプロンプトを利用する方法</h3>
<p>
まず、「スタートメニュー」→「プログラム」→「アクセサリ」→「コマンド プロンプト」を選択します。
</p>
<p style="text-align:center">
<img src="command_prompt.png" alt="図：コマンドプロンプト画面" /><br />
図：コマンドプロンプト画面
</p>
<p>
次に、cd コマンドを利用して、twdevがインストールされているフォルダへアクセスします。
アクセスできたことを確認するために、dirコマンドを用いてフォルダの内容を確認すると良いでしょう。
</p>
<p style="text-align:center">
<img src="command_cd.png" alt="図：フォルダアクセス画面" /><br />
図：フォルダアクセス画面
</p>
<p>
 ここで、テンプレートファイルとリストファイルを指定して、twdevを動かします。
 テンプレートファイルとリストファイルの作り方は、<a href="#use-2">プログラムの仕様</a>、または、<a href="example.html">例題：おとボクTCGプロジェクト</a>をご覧下さい。
 以下、テンプレートファイルを"eventtype.csv"、リストファイルを"event.csv"としてtwdevを操作します。
</p>
<p>
 まずは、リストの全てをカードへ出力する方法です。
</p>
<blockquote>
<pre>
> java -jar twdev.jar /all eventtype.csv event.csv card/event
</pre>
</blockquote>
<p>
こう入力すると、テンプレートファイルとリストファイルから、
cardフォルダ、ファイルevent-*.png（*には数字が入ります）に、カードファイルが作成されます。
</p>
<p style="text-align:center">
<img src="command_twdev_all.png" alt="twdev実行画面（リストファイル全データ）" /><br />
図：twdev実行画面（リストファイル全データ）
</p>
<p>
 ただし、この操作は時間が掛かりますので（大きなファイルであるほど、時間の掛かり方は顕著です）、
しばらくお待ち下さい。
</p>
<p>
 このとき、余計なカードファイルを生成するから時間が掛かるため、
 リストファイルの特定の列のみからカードファイルのみを生成することも考えられます。
 たとえば、5行めのカードのみを再生成したい場合は、
</p>
<blockquote>
<pre>
> java -jar twdev.jar /line 4 eventtype.csv event.csv card/event
</pre>
</blockquote>
<p>
 のコマンドを入力する（twdevは行数を0から数える仕様ですので、5行目を4と指定しています）と、
</p>
<p style="text-align:center">
<img src="command_twdev_line.png" alt="twdev実行画面（リストファイル特定データ）" /><br />
図：twdev実行画面（リストファイル特定データ）
</p>
<p>
 として、上と同じように、ファイルevent.pngが生成されます。
 この場合、数字は付与されません。
</p>
<p>
 この利用方法は、リストファイルの部分更新を行った場合にとくに有効です。
</p>
<h3 id="use-3-2">バッチファイルを利用する方法</h3>
<p>
 上記操作を簡単にするため、MS-DOSのバッチファイルを利用することが考えられます。
 たとえば、
</p>
<blockquote>
<pre>
java -jar twdev.jar /all eventtype.csv event.csv card/event
</pre>
</blockquote>
<p>
と書かれたバッチファイルを用意して、ダブルクリックで実行すると、
上記コマンドプロンプトの起動が不要になります。
</p>
<p style="text-align:center">
<img src="batfile.png" alt="バッチファイルの準備" /><br />
図：バッチファイルの準備
</p>
<h4 id="use-3-2-1">応用例１：ログファイルを出力する</h4>
<p>
 バッチファイルを実行すると、処理終了後にウィンドウが消えてしまうため、
 処理が正常に終了したか、異常終了してしまったかの区別が非常に付きづらくなってしまいます。
 これを避けるため、ログファイルを定義し、そこにデータを出力する方法を考えます。
</p>
<blockquote>
<pre>
java -jar twdev.jar /all eventtype.csv event.csv card/event <strong>> eventcardlog.txt 2>&1</strong>
</pre>
</blockquote>
<p>
 と書かれたバッチファイル（基本からの差分を<strong>赤字</strong>で表示。以下同じ）を用意すると、
 直前に実行したtwdevの表示が、代わりにeventcardlog.txtに出力されます。
 このコマンドの意味は、UNIXにおけるbashと同等なので、興味のある方はお調べいただけると幸いです。
 もちろん、eventcardlog.txtは、別の名前でもかまいません。
 このとき、拡張子を.txtにしておくと、メモ帳と関連づけられるため読みやすいでしょう。
</p>
<p>
 また、ログを累積して取得したい場合は、
</p>
<blockquote>
<pre>
java -jar twdev.jar /all eventtype.csv event.csv card/event <strong>>> eventcardlog.txt 2>&1</strong>
</pre>
</blockquote>
<p>
 とすると、eventcardlog.txtに出力されたログが追記されていきます。
</p>
<h4 id="use-3-2-2">応用例２：バッチファイルを実行した時刻を記録する。</h4>
<p>
 処理するファイル数やファイルサイズが大きい場合、あるいは、カード出力の記録を取っておきたい場合など、
 上記ログに時刻を書いておくと有用な場合があります。
</p>
<p>
 このとき、MS-DOSのコマンド"date"や"time"を利用して、
 ログに時刻を出力してあげると見やすいでしょう。
</p>
<blockquote>
<pre>
<strong>date /t >> eventcardlog.txt</strong>
<strong>time /t >> eventcardlog.txt</strong>
<strong>echo ----------------------- twdev compile start ----------------------- >> eventcardlog.txt</strong>
java -jar twdev.jar /all eventtype.csv event.csv card/event <strong>>> eventcardlog.txt 2>&1</strong>
<strong>echo ----------------------- twdev compile end ------------------------- >> eventcardlog.txt</strong>
<strong>date /t >> eventcardlog.txt</strong>
<strong>time /t >> eventcardlog.txt</strong>
</pre>
</blockquote>
<p>
 と書かれたバッチファイルを用意しておくことで、
 ログに日付と時刻が出力されます。
</p>
<h4 id="use-3-2-3">応用例３：バッチファイル実行後、パソコンの電源を切る</h4>
<p>
 環境またはバージョンによって、twdevは大変処理が重くなることがあるため、
 とくに処理するファイル数やファイルサイズが大きい場合、
 （人間から見て）効率の良い処理のためには、
 お出かけやおやすみのときにtwdevを実行してパソコンを放置する手段が有効な場合があります。
 （電力やトラブルシューティングなどの異常系は考えられていません。あしからず）
</p>
<p>
 このとき、MS-DOSのコマンド"shutdown"を利用して、
 バッチファイルの実行完了とともにパソコンの電源を落とす方法が考えられます。
</p>
<blockquote>
<pre>
java -jar twdev.jar /all eventtype.csv event.csv card/event <strong>> eventcardlog.txt 2>&1</strong>
<strong>shutdown -s -f</strong>
</pre>
</blockquote>
<p>
 と書かれたバッチファイルを用意しておくことで、
 Windowsが、バッチファイルの実行完了とともにパソコンの電源を落としてくれます。
 （起動後に状況を確認できるよう、前項のeventcardlog.txtへの出力は残してあります。もちろん、消していただいてもかまいません）
</p>
<h2 id="use-2">プログラムの仕様</h2>
<h3 id="use-2-1">テンプレート</h3>
<p>
 テンプレートとは、イメージ出力のための型のことを言います。
 テンプレートは単なる型に過ぎないため、型に当てはめるべきデータであるリストがあって初めて役に立ちます。
</p>
<p>
 テンプレートは、テンプレートファイル、および、それぞれに付随するイメージファイルによってなります。
</p>
<p>
 テンプレートファイルは、指定された項目をもつCSV形式をとります。
 CSV形式とは、テキストで表される表形式のことで、半角カンマで列の区切りを、改行で行の区切りを示します。
</p>
<p>
 CSV形式の1行目は、次の表現に固定されます。
</p>
<blockquote><pre>
"Alias","x","y","width","height","Type","Data","Text Align(Text)","Vertical Align(Text)","Font Face(Text)","Font Style(Text)","Font Size(Text)","Font Color - R(Text)","Font Color - G(Text)","Font Color - B(Text)"
</pre></blockquote>
<p>
ver.1.0現在、データの中身は意味を持ちません。順番と個数のみがものを言います。
</p>
<p>
CSV形式の2行目以降は、いくつかの固定された形式から、一つを選択します。
</p>
<h4 id="use-2-1-1">1. 基本イメージ</h4>
<p>
基本イメージとは、カードの全体的な大きさを規定するイメージファイルです。
必ず１回だけ指定してください。
</p>
<p>
イメージファイルは、背景色（通常は白または黒の単色）によって構成されます。
また、カードの大きさ・解像度などは、すべてこのイメージファイルの大きさによって決まります。
</p>
<p>
形式：
</p>
<ul>
 <li>１列め・別名　……リストファイルの項目（後述）と一致しない文字列を指定してください。</li>
 <li>２列め・ｘ座標……0を代入してください。この要素は意味を持ちません。</li>
 <li>３列め・ｙ座標……0を代入してください。この要素は意味を持ちません。</li>
 <li>４列め・幅　　……基本イメージの幅を代入してください。この要素は意味を持ちません。</li>
 <li>５列め・高さ　……基本イメージの高さを代入してください。この要素は意味を持ちません。</li>
 <li>６列め・タイプ……"base"の文字列を入れてください（大文字・小文字は問いません）。この要素により、基本イメージファイルの指定であると解釈します。</li>
 <li>７列め・要素　……基本イメージファイルを指定してください。この要素により、基本イメージファイルを読み込みます。</li>
</ul>
<p>
例：
</p>
<blockquote><pre>
"背景色",0,0,978,1346,"Base","base.png"
</pre></blockquote>

<h4 id="use-2-1-2">2. イメージ</h4>
<p>
イメージとは、カードに描画するイメージファイルです。
対応しているフォーマットは、bmp、gif、jpg、pngです。
</p>
<p>
イメージファイルは、背景色（通常は白または黒の単色）によって構成されます。
また、カードの大きさ・解像度などは、すべてこのイメージファイルの大きさによって決まります。
</p>
<p>
形式：
</p>
<ul>
 <li>１列め・別名　……リストファイルの項目（後述）を見て、カードのイメージデータを入れ込む場合には一致する文字列を指定してください。
                       テンプレートとして用いる場合には、一致しない文字列を指定してください。</li>
 <li>２列め・ｘ座標……イメージファイルの左上隅のｘ座標（単位はピクセル）を代入してください。</li>
 <li>３列め・ｙ座標……イメージファイルの左上隅のｙ座標（単位はピクセル）を代入してください。</li>
 <li>４列め・幅　　……イメージファイルを表示する幅を代入してください。
                       Javaの技術的な制限がない限り、イメージファイルはこの幅に拡大または縮小されます。</li>
 <li>５列め・高さ　……イメージファイルの高さを代入してください。
                       Javaの技術的な制限がない限り、イメージファイルはこの高さに拡大または縮小されます。</li>
 <li>６列め・タイプ……"image"の文字列を入れてください（大文字・小文字は問いません）。
                       この要素により、イメージファイルの指定であると解釈します。</li>
 <li>７列め・要素　……イメージファイルを指定してください。
                       リストにより読み込むデータが指定されていない場合、ここで指定されたイメージファイルを利用します。
                       リストにより読み込むデータが指定されている場合、この指定は無視され、リストで指定されたイメージファイルを利用します。</li>
</ul>
<p>
例：
</p>
<blockquote><pre>
"キャラクターイラスト",100,248,617,702,"Image","character-illust-space.png"
</pre></blockquote>
<h4 id="use-2-1-3">3. テキスト（文字列）</h4>
<p>
テキスト、あるいは文字列とは、カードの全体的な大きさを規定するイメージファイルです。
</p>
<p>
イメージファイルは、背景色（通常は白または黒の単色）によって構成されます。
また、カードの大きさ・解像度などは、すべてこのイメージファイルの大きさによって決まります。
</p>
<p>
形式：
</p>
<ul>
 <li>　１列め・別名　　……リストファイルの項目（後述）を見て、カードの文字データを入れ込む場合には一致する文字列を指定してください。
                           文字列をテンプレートとして用いる場合には、一致しない文字列を指定してください。</li>
 <li>　２列め・ｘ座標　……表示テキストの左上隅のｘ座標（単位はピクセル）を代入してください。</li>
 <li>　３列め・ｙ座標　……表示テキストの左上隅のｙ座標（単位はピクセル）を代入してください。</li>
 <li>　４列め・幅　　　……表示テキストを収める範囲の幅を代入してください。
                           twdevは、各テキストがこの幅に収まるように、適切に改行をします。</li>
 <li>　５列め・高さ　　……表示テキストを収める範囲の高さを代入してください。
                           twdevは、各テキストがこの高さに収まるように、フォントの大きさを調整します。</li>
 <li>　６列め・タイプ　……"text"の文字列を入れてください（大文字・小文字は問いません）。
                           この要素により、テキストの指定であると解釈します。</li>
 <li>　７列め・要素　　……テキストを指定してください。
                           リストにより読み込むデータが指定されていない場合、ここで指定されたテキストを利用します。
                           リストにより読み込むデータが指定されている場合、この指定は無視され、リストで指定されたテキストを利用します。</li>
 <li>　８列め・左右寄せ……範囲の中で、テキストを左寄せ（"left"）するか、センタリング（"center"）するか、右寄せ（"right"）するかを指定します。
                           指定のない場合は左寄せです。</li>
 <li>　９列め・上下寄せ……範囲の中で、テキストを上寄せ（"top"）するか、センタリング（"center"）するか、下寄せ（"bottom"）するかを指定します。
                           指定のない場合は上寄せです。</li>
 <li>１０列め・フォント……フォントを指定してください。物理フォント、または論理フォントを指定可能です。</li>
 <li>１１列め・文字飾り……表示する文字の飾り（飾りなし"regular"、太字"bold"、イタリック"italic"）を指定してください。</li>
 <li>１２列め・サイズ　……文字の最大の大きさを、ポイント単位で指定します。
                           文字がここで指定したサイズより小さくなる場合は、幅と高さを見直してください。</li>
 <li>１３列め・色（赤）……１３，１４，１５列めの値から、表示テキストの色を決定します。</li>
 <li>１４列め・色（緑）……１３，１４，１５列めの値から、表示テキストの色を決定します。</li>
 <li>１５列め・色（青）……１３，１４，１５列めの値から、表示テキストの色を決定します。</li>
</ul>
<p>
例：
</p>
<blockquote><pre>
"特殊能力",110,960,756,244,"Text","nouryoku",,,"Default Sans Serif","Regular",28,0,0,0
</pre></blockquote>

<h3 id="env-2-2">リスト</h3>
<p>
 リストは、イメージ出力を行うデータのことです。
 リスト単体ではイメージ出力の方法を定めることができないため、テンプレートがあって初めて役に立ちます。
</p>
<p>
 リストは、リストファイル、および、それぞれに付随するイメージファイルによってなります。
</p>
<p>
 リストファイルは、テンプレートファイルにより形式を決定づけられるCSV形式ファイルです。
</p>
<p>
一行目には、テンプレートファイルの各項目の「別名」を列挙します。
</p>
<p>
二行目以降は、それぞれの「別名」が上げられた項目にあてはめるデータを、それぞれ列挙します。
</p>
<p>
こうすることで、リストファイルのデータが、カードに出力されるデータベースとして利用可能となります。
</p>
<p>
例えば、テンプレートファイルが、
</p>
<pre>
"Alias","x","y","width","height","Type","Data","Align(Text)","Vertical Align(Text)","Font Face(Text)","Font Style(Text)","Font Size(Text)","Font Color - R(Text)","Font Color - G(Text)","Font Color - B(Text)"
"背景色",0,0,978,1346,"Base","base.png"
"イベント名ウィンドウ",100,100,500,100,"Image","event-name-window.png"
"イベント名",100,100,500,100,"Text","イベント名",,"Center","Default Sans Serif","Regular",64,0,0,0
"イベントカード種別表示",745,235,119,135,"Text","event","Center",,"Default Serif","Regular",28,0,153,68
"イラストファイル",112,280,751,422,"Image","event-illust-space.png"
</pre>
<p>
であるとき、これに対応するリストファイルは、たとえば、
</p>
<pre>
"イベント名","イラストファイル"
"大は小を兼ねる","illust/kana001.png"
"ティータイム","illust/kana002.png"
</pre>
<p>
と書きます。こうすることで、テンプレートファイルの、「イベント名」と「イラストファイル」の項目は、置き換え可能なデータを持ちます。
</p>
<p>
詳しい実例は、<a href="example.html">例題：おとボクTCGプロジェクト</a>をご覧下さい。
</p>
<p class="footer">
Copyright (c) Takumi Kanno / Trade-Wind 2007
</p>
</body>
</html>
